
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>seldonian.parse_tree.parse_tree.ParseTree &#8212; Seldonian Engine pre-release documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="seldonian.safety_test" href="seldonian.safety_test.html" />
    <link rel="prev" title="seldonian.parse_tree.parse_tree.make_parse_trees_from_constraints" href="seldonian.parse_tree.parse_tree.make_parse_trees_from_constraints.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="seldonian-parse-tree-parse-tree-parsetree">
<h1>seldonian.parse_tree.parse_tree.ParseTree<a class="headerlink" href="#seldonian-parse-tree-parse-tree-parsetree" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ParseTree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_regime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sub_regime</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to represent a parse tree for a single behavioral constraint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>delta</strong> (<em>float</em>) – Confidence level. Specifies the maximum probability 
that the algorithm can return a solution violat the
behavioral constraint.</p></li>
<li><p><strong>regime</strong> (<em>str</em>) – The category of the machine learning algorithm,
e.g., supervised_learning or reinforcement_learning</p></li>
<li><p><strong>sub_regime</strong> (<em>str</em>) – The sub-category of ml algorithm, e.g. 
classification or regression for supervised learning.
Use ‘all’ for RL.</p></li>
<li><p><strong>columns</strong> (<em>List</em><em>(</em><em>str</em><em>)</em>) – The names of the columns in the dataframe. 
Used to determine if conditional columns provided by user
are appropriate.</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>root</strong> (<em>nodes.Node object</em>) – Root node which contains the whole tree 
via left and right child attributes.
Gets assigned when tree is built</p></li>
<li><p><strong>constraint_str</strong> (<em>str</em>) – The string expression for the behavioral
constraint</p></li>
<li><p><strong>n_nodes</strong> (<em>int</em>) – Total number of nodes in the parse tree</p></li>
<li><p><strong>n_base_nodes</strong> (<em>int</em>) – Number of base variable nodes in the parse tree.
Does not include constants. If a base variable,
such as PR | [M] appears more than once in the 
constraint_str each appearance contributes 
to n_base_nodes</p></li>
<li><p><strong>base_node_dict</strong> (<em>dict</em>) – Keeps track of unique base variable nodes,
their confidence bounds and whether 
the bounds have been calculated
for a given base node already.
Helpful for handling case where we have 
duplicate base nodes</p></li>
<li><p><strong>node_fontsize</strong> (<em>int</em>) – Fontsize used for graphviz visualizations</p></li>
<li><p><strong>available_measure_functions</strong> (<em>int</em>) – A list of measure functions for the 
given regime and sub-regime, e.g. “Mean_Error”
for supervised regression or “PR”, i.e. Positive Rate
for supervised classification.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return repr(self).</p>
</dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
</tbody>
</table>
<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._abs">
<span class="sig-name descname"><span class="pre">_abs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._abs" title="Permalink to this definition">¶</a></dt>
<dd><p>Absolute value of a confidence interval</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._add">
<span class="sig-name descname"><span class="pre">_add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add two confidence intervals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
<li><p><strong>b</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._assign_bounds_helper">
<span class="sig-name descname"><span class="pre">_assign_bounds_helper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lower_needed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">upper_needed</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._assign_bounds_helper" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to traverse the parse tree 
and assign which bounds we need to calculate 
on the base nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference internal" href="seldonian.parse_tree.nodes.Node.html#seldonian.parse_tree.nodes.Node" title="seldonian.parse_tree.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> object) – node in the parse tree</p></li>
<li><p><strong>lower_needed</strong> (<em>bool</em>) – Whether lower bound needs to be calculated</p></li>
<li><p><strong>upper_needed</strong> (<em>bool</em>) – Whether upper bound needs to be calculated</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._assign_deltas_helper">
<span class="sig-name descname"><span class="pre">_assign_deltas_helper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_method</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._assign_deltas_helper" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function to traverse the parse tree 
and assign delta values to base nodes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>node</strong> (<a class="reference internal" href="seldonian.parse_tree.nodes.Node.html#seldonian.parse_tree.nodes.Node" title="seldonian.parse_tree.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> object) – node in the parse tree</p></li>
<li><p><strong>weight_method</strong> (<em>str</em>) – How you want to assign the deltas to the base nodes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._ast2pt_node">
<span class="sig-name descname"><span class="pre">_ast2pt_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ast_node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._ast2pt_node" title="Permalink to this definition">¶</a></dt>
<dd><p>From ast.AST node object, create
one of the node objects from <code class="xref py py-mod docutils literal notranslate"><span class="pre">Nodes</span></code></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ast_node</strong> (<em>ast.AST node object</em>) – node in the ast tree</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._ast_tree_helper">
<span class="sig-name descname"><span class="pre">_ast_tree_helper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ast_node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._ast_tree_helper" title="Permalink to this definition">¶</a></dt>
<dd><p>From a given node in the ast tree,
make a node in the tree and recurse
to children of this node.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ast_node</strong> (<em>ast.AST node object</em>) – node in the ast tree</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._div">
<span class="sig-name descname"><span class="pre">_div</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._div" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide two confidence intervals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
<li><p><strong>b</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._evaluator_helper">
<span class="sig-name descname"><span class="pre">_evaluator_helper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._evaluator_helper" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for traversing 
through the tree to evaluate the constraint</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="seldonian.parse_tree.nodes.Node.html#seldonian.parse_tree.nodes.Node" title="seldonian.parse_tree.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> object) – node in the parse tree</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._exp">
<span class="sig-name descname"><span class="pre">_exp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._exp" title="Permalink to this definition">¶</a></dt>
<dd><p>Exponentiate a confidence interval</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._max">
<span class="sig-name descname"><span class="pre">_max</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._max" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the maximum of two confidence intervals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
<li><p><strong>b</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._min">
<span class="sig-name descname"><span class="pre">_min</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._min" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the minimum of two confidence intervals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
<li><p><strong>b</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._mult">
<span class="sig-name descname"><span class="pre">_mult</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._mult" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply two confidence intervals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
<li><p><strong>b</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._pow">
<span class="sig-name descname"><span class="pre">_pow</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._pow" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the confidence interval on 
pow(a,b) where 
b and b are both be intervals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
<li><p><strong>b</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._preprocess_constraint_str">
<span class="sig-name descname"><span class="pre">_preprocess_constraint_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._preprocess_constraint_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if inequalities present and 
move everything to one side so final 
constraint string is in the form: {constraint_str} &lt;= 0</p>
<p>Also does some validation checks to make sure string
that was passed is valid</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s</strong> (<em>str</em>) – mathematical expression written in Python syntax
from which we build the parse tree</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>String for g</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._propagate_value">
<span class="sig-name descname"><span class="pre">_propagate_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._propagate_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for propagating values</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="seldonian.parse_tree.nodes.Node.html#seldonian.parse_tree.nodes.Node" title="seldonian.parse_tree.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> object) – node in the parse tree</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._propagator_helper">
<span class="sig-name descname"><span class="pre">_propagator_helper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._propagator_helper" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for traversing 
through the tree and propagating confidence bounds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="seldonian.parse_tree.nodes.Node.html#seldonian.parse_tree.nodes.Node" title="seldonian.parse_tree.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> object) – node in the parse tree</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._protect_nan">
<span class="sig-name descname"><span class="pre">_protect_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bound</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bound_type</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._protect_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle nan as negative infinity if in lower bound
and postitive infinity if in upper bound</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bound</strong> (<em>float</em>) – The value of the upper or lower bound</p></li>
<li><p><strong>bound_type</strong> (<em>str</em>) – ‘lower’ or ‘upper’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree._sub">
<span class="sig-name descname"><span class="pre">_sub</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree._sub" title="Permalink to this definition">¶</a></dt>
<dd><p>Subract two confidence intervals</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
<li><p><strong>b</strong> (<em>tuple</em>) – Confidence interval like: (lower,upper)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.assign_bounds_needed">
<span class="sig-name descname"><span class="pre">assign_bounds_needed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.assign_bounds_needed" title="Permalink to this definition">¶</a></dt>
<dd><p>Breadth first search through the tree and 
decide which bounds are required to compute
on each child node. Eventually we get to base nodes. 
There are cases where it is not always 
necessary to compute both lower and upper 
bounds because at the end all we care about
is the upper bound of the root node.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.assign_deltas">
<span class="sig-name descname"><span class="pre">assign_deltas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">weight_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'equal'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.assign_deltas" title="Permalink to this definition">¶</a></dt>
<dd><p>Assign the delta values to the base nodes in the tree.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>weight_method</strong> (<em>str</em>) – str, defaults to ‘equal’
How you want to assign the deltas to the base nodes.
The default ‘equal’ splits up delta equally
among unique base nodes</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.build_tree">
<span class="sig-name descname"><span class="pre">build_tree</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraint_str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_weight_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'equal'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.build_tree" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience function for building the tree from 
a constraint string, 
weighting of deltas to each base node, and 
assigning which nodes need upper and lower bounding</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>constraint_str</strong> (<em>str</em>) – mathematical expression written in Python syntax
from which we build the parse tree</p></li>
<li><p><strong>delta_weight_method</strong> (<em>str</em><em>, </em><em>defaults to 'equal'</em>) – str, 
How you want to assign the deltas to the base nodes.
The default ‘equal’ splits up delta equally
among unique base nodes</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.create_from_ast">
<span class="sig-name descname"><span class="pre">create_from_ast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">s</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.create_from_ast" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the node structure of the tree
given a mathematical string expression, s</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>s</strong> (<em>str</em>) – mathematical expression written in Python syntax
from which we build the parse tree</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.evaluate_constraint">
<span class="sig-name descname"><span class="pre">evaluate_constraint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.evaluate_constraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate the constraint itself (not bounds)
Postorder traverse (left, right, root)
through the tree and calculate the values
of the base nodes 
then propagate bounds using propagation logic</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.make_viz">
<span class="sig-name descname"><span class="pre">make_viz</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.make_viz" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a graphviz diagram from a root node</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>title</strong> (<em>str</em>) – The title you want to display at the top
of the graph</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.make_viz_helper">
<span class="sig-name descname"><span class="pre">make_viz_helper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">graph</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.make_viz_helper" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for make_viz()
Recurses through the parse tree
and adds nodes and edges to the graph</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>root</strong> (<a class="reference internal" href="seldonian.parse_tree.nodes.Node.html#seldonian.parse_tree.nodes.Node" title="seldonian.parse_tree.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> object) – root of the parse tree</p></li>
<li><p><strong>graph</strong> (<em>graphviz.Digraph object</em>) – The graphviz graph object</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.propagate">
<span class="sig-name descname"><span class="pre">propagate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.propagate" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function for propagating confidence bounds</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node</strong> (<a class="reference internal" href="seldonian.parse_tree.nodes.Node.html#seldonian.parse_tree.nodes.Node" title="seldonian.parse_tree.nodes.Node"><code class="xref py py-class docutils literal notranslate"><span class="pre">Node</span></code></a> object) – node in the parse tree</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.propagate_bounds">
<span class="sig-name descname"><span class="pre">propagate_bounds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.propagate_bounds" title="Permalink to this definition">¶</a></dt>
<dd><p>Postorder traverse (left, right, root)
through the tree and calculate confidence
bounds on base nodes,
then propagate bounds using propagation logic</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="seldonian.parse_tree.parse_tree.ParseTree.reset_base_node_dict">
<span class="sig-name descname"><span class="pre">reset_base_node_dict</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reset_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#seldonian.parse_tree.parse_tree.ParseTree.reset_base_node_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset base node dict to initial state</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>reset_data</strong> (<em>bool</em>) – Whether to reset the cached data 
for each base node. This is needed less frequently
than one needs to reset the bounds.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Seldonian Engine</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="seldonian.html">seldonian</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="seldonian.RL.html">seldonian.RL</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.candidate_selection.html">seldonian.candidate_selection</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.dataset.html">seldonian.dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.models.html">seldonian.models</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.optimizers.html">seldonian.optimizers</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="seldonian.parse_tree.html">seldonian.parse_tree</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="seldonian.parse_tree.nodes.html">seldonian.parse_tree.nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="seldonian.parse_tree.operators.html">seldonian.parse_tree.operators</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="seldonian.parse_tree.parse_tree.html">seldonian.parse_tree.parse_tree</a><ul class="current">
<li class="toctree-l5"><a class="reference internal" href="seldonian.parse_tree.parse_tree.make_parse_trees_from_constraints.html">seldonian.parse_tree.parse_tree.make_parse_trees_from_constraints</a></li>
<li class="toctree-l5 current"><a class="current reference internal" href="#">seldonian.parse_tree.parse_tree.ParseTree</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.safety_test.html">seldonian.safety_test</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.seldonian_algorithm.html">seldonian.seldonian_algorithm</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.spec.html">seldonian.spec</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.utils.html">seldonian.utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="seldonian.warnings.html">seldonian.warnings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../api.html">API</a><ul>
  <li><a href="seldonian.html">seldonian</a><ul>
  <li><a href="seldonian.parse_tree.html">seldonian.parse_tree</a><ul>
  <li><a href="seldonian.parse_tree.parse_tree.html">seldonian.parse_tree.parse_tree</a><ul>
      <li>Previous: <a href="seldonian.parse_tree.parse_tree.make_parse_trees_from_constraints.html" title="previous chapter">seldonian.parse_tree.parse_tree.make_parse_trees_from_constraints</a></li>
      <li>Next: <a href="seldonian.safety_test.html" title="next chapter">seldonian.safety_test</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, University of Massachusetts, Amherst.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/_autosummary/seldonian.parse_tree.parse_tree.ParseTree.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>